<!DOCTYPE html>
<html>
  <head>
    <title>Distances</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
  </head>

  <body>
    <div id="inputs">
      <form>
        <input id="dest1" type="text" placeholder="Add City"></input>
        <input id="submitButton" type="submit"></input>
      </form>
    </div>
    <div id="totalDistance"></div>
    <ol id="outputDiv"></ol>

    <script>
      var origin = 'Thessaloniki';
      var destination = [];
      var totalKM = 0;
      var totalCities = 0;

      function calculateDistances() {
        var service = new google.maps.DistanceMatrixService();
        service.getDistanceMatrix(
          {
          origins: [origin],
          destinations: [destination[totalCities - 1]],
          travelMode: google.maps.TravelMode.DRIVING,
          unitSystem: google.maps.UnitSystem.METRIC,
          avoidHighways: false,
          avoidTolls: false
          }, callback
        );
      }

      function callback(response, status) {
        if (status != google.maps.DistanceMatrixStatus.OK) {
          alert('Error was: ' + status);
        } else {
          var outputDiv = document.getElementById('outputDiv');
          var totalDistance = document.getElementById('totalDistance');

          var results = response.rows[0].elements;

          totalKM += parseInt(results[0].distance.text);

          var node = document.createElement("LI");
          var textnode = document.createTextNode('From ' + destination[totalCities - 1]
              + ': ' + results[0].distance.text + ' in '
              + results[0].duration.text);
          node.appendChild(textnode);
          outputDiv.appendChild(node);

          totalDistance.innerHTML = 'Total ' + totalKM + ' Km';
          document.getElementById("dest1").value = '';
        }
      }

      document.getElementById("submitButton").addEventListener("click", function(event){
        event.preventDefault();
        destination.push(document.getElementById("dest1").value);
        totalCities++;
        calculateDistances();
      });
    </script>

  </body>
</html>
